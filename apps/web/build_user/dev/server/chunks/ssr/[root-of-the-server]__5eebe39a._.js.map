{
  "version": 3,
  "sources": [],
  "sections": [
    {
      "offset": {
        "line": 94,
        "column": 0
      },
      "map": {
        "version": 3,
        "sources": [
          "file:///home/gurgen/projects/personal/crypto-news/apps/web/src/hooks/useRealtime.ts"
        ],
        "sourcesContent": [
          "import { useEffect, useRef, useState } from 'react';\nimport { io, Socket } from 'socket.io-client';\n\nconst SOCKET_URL = process.env.NEXT_PUBLIC_API_URL || 'http://api:3000';\n\nexport const useRealtime = () => {\n    const socketRef = useRef<Socket | null>(null);\n    const [isConnected, setIsConnected] = useState(false);\n\n    useEffect(() => {\n        const token = localStorage.getItem('auth_token');\n\n        // Don't attempt to connect if there is no token\n        if (!token) {\n            return;\n        }\n\n        // Connect to the 'events' namespace\n        socketRef.current = io(`${SOCKET_URL}/events`, {\n            auth: {\n                token: `Bearer ${token}`\n            },\n            query: {\n                token: token\n            },\n            transports: ['websocket'],\n            reconnection: true,\n            reconnectionAttempts: 5,\n            reconnectionDelay: 3000,\n        });\n\n        socketRef.current.on('connect', () => {\n            console.log('Connected to WebSocket');\n            setIsConnected(true);\n        });\n\n        socketRef.current.on('disconnect', () => {\n            console.log('Disconnected from WebSocket');\n            setIsConnected(false);\n        });\n\n        socketRef.current.on('connect_error', (err) => {\n            // Suppress 403 errors to keep console clean, as they are expected when auth fails\n            if (err.message.includes('403') || (err as any).data?.code === 403) {\n                console.warn('WebSocket auth failed (403). This is expected if session expired.');\n            } else {\n                console.error('WebSocket connection error:', err.message);\n            }\n            setIsConnected(false);\n        });\n\n        return () => {\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n            }\n        };\n    }, []);\n\n    const subscribeToTicker = (tokens: string[]) => {\n        if (socketRef.current && isConnected) {\n            socketRef.current.emit('subscribeToTicker', tokens);\n        }\n    };\n\n    const unsubscribeFromTicker = (tokens: string[]) => {\n        if (socketRef.current && isConnected) {\n            socketRef.current.emit('unsubscribeFromTicker', tokens);\n        }\n    };\n\n    return {\n        socket: socketRef.current,\n        isConnected,\n        subscribeToTicker,\n        unsubscribeFromTicker,\n    };\n};\n"
        ],
        "names": [],
        "mappings": ";;;;AAAA;AACA;;;AAEA,MAAM,aAAa,6DAAmC;AAE/C,MAAM,cAAc;IACvB,MAAM,YAAY,IAAA,+MAAM,EAAgB;IACxC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,gDAAgD;QAChD,IAAI,CAAC,OAAO;YACR;QACJ;QAEA,oCAAoC;QACpC,UAAU,OAAO,GAAG,IAAA,8LAAE,EAAC,GAAG,WAAW,OAAO,CAAC,EAAE;YAC3C,MAAM;gBACF,OAAO,CAAC,OAAO,EAAE,OAAO;YAC5B;YACA,OAAO;gBACH,OAAO;YACX;YACA,YAAY;gBAAC;aAAY;YACzB,cAAc;YACd,sBAAsB;YACtB,mBAAmB;QACvB;QAEA,UAAU,OAAO,CAAC,EAAE,CAAC,WAAW;YAC5B,QAAQ,GAAG,CAAC;YACZ,eAAe;QACnB;QAEA,UAAU,OAAO,CAAC,EAAE,CAAC,cAAc;YAC/B,QAAQ,GAAG,CAAC;YACZ,eAAe;QACnB;QAEA,UAAU,OAAO,CAAC,EAAE,CAAC,iBAAiB,CAAC;YACnC,kFAAkF;YAClF,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,AAAC,IAAY,IAAI,EAAE,SAAS,KAAK;gBAChE,QAAQ,IAAI,CAAC;YACjB,OAAO;gBACH,QAAQ,KAAK,CAAC,+BAA+B,IAAI,OAAO;YAC5D;YACA,eAAe;QACnB;QAEA,OAAO;YACH,IAAI,UAAU,OAAO,EAAE;gBACnB,UAAU,OAAO,CAAC,UAAU;YAChC;QACJ;IACJ,GAAG,EAAE;IAEL,MAAM,oBAAoB,CAAC;QACvB,IAAI,UAAU,OAAO,IAAI,aAAa;YAClC,UAAU,OAAO,CAAC,IAAI,CAAC,qBAAqB;QAChD;IACJ;IAEA,MAAM,wBAAwB,CAAC;QAC3B,IAAI,UAAU,OAAO,IAAI,aAAa;YAClC,UAAU,OAAO,CAAC,IAAI,CAAC,yBAAyB;QACpD;IACJ;IAEA,OAAO;QACH,QAAQ,UAAU,OAAO;QACzB;QACA;QACA;IACJ;AACJ"
      }
    },
    {
      "offset": {
        "line": 171,
        "column": 0
      },
      "map": {
        "version": 3,
        "sources": [
          "file:///home/gurgen/projects/personal/crypto-news/apps/web/src/components/LivePriceTicker.tsx"
        ],
        "sourcesContent": [
          "\"use client\";\n\nimport React, { useEffect, useState } from 'react';\nimport { useRealtime } from '../hooks/useRealtime';\nimport { TrendingUp, TrendingDown } from 'lucide-react';\n\ninterface TickerData {\n    token: string;\n    price: number;\n    change24h: number;\n    timestamp: number;\n}\n\nexport default function LivePriceTicker() {\n    const { socket, isConnected, subscribeToTicker } = useRealtime();\n    const [prices, setPrices] = useState<Map<string, TickerData>>(new Map());\n\n    // Initial tokens to track\n    const tokens = ['BTC', 'ETH', 'BNB', 'SOL', 'XRP', 'ADA', 'DOGE', 'DOT'];\n\n    useEffect(() => {\n        if (isConnected && socket) {\n            // Subscribe to updates\n            subscribeToTicker(tokens);\n\n            // Listen for updates\n            socket.on('tickerUpdate', (data: TickerData) => {\n                setPrices(prev => {\n                    const newMap = new Map(prev);\n                    newMap.set(data.token, data);\n                    return newMap;\n                });\n            });\n\n            return () => {\n                socket.off('tickerUpdate');\n            };\n        }\n    }, [isConnected, socket]);\n\n    return (\n        <div className=\"w-full bg-black/80 border-b border-white/10 overflow-hidden py-2\">\n            <div className=\"flex items-center gap-8 animate-scroll whitespace-nowrap\">\n                {/* Duplicate list for seamless scrolling effect */}\n                {[...tokens, ...tokens].map((token, i) => {\n                    const data = prices.get(token);\n                    const price = data?.price || 0;\n                    const isPositive = (data?.change24h || 0) >= 0;\n\n                    return (\n                        <div key={`${token}-${i}`} className=\"flex items-center gap-2 text-sm\">\n                            <span className=\"font-bold text-gray-300\">{token}</span>\n                            <span className=\"text-white font-mono\">${price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 4 })}</span>\n                            {data && (\n                                <span className={`flex items-center text-xs ${isPositive ? 'text-green-400' : 'text-red-400'}`}>\n                                    {isPositive ? <TrendingUp className=\"w-3 h-3 mr-1\" /> : <TrendingDown className=\"w-3 h-3 mr-1\" />}\n                                    {Math.abs(data.change24h).toFixed(2)}%\n                                </span>\n                            )}\n                            {!data && <span className=\"text-gray-600 text-xs\">Loading...</span>}\n                        </div>\n                    );\n                })}\n            </div>\n            <style jsx>{`\n                @keyframes scroll {\n                    0% { transform: translateX(0); }\n                    100% { transform: translateX(-50%); }\n                }\n                .animate-scroll {\n                    animation: scroll 30s linear infinite;\n                }\n                .animate-scroll:hover {\n                    animation-play-state: paused;\n                }\n            `}</style>\n        </div>\n    );\n}\n"
        ],
        "names": [],
        "mappings": ";;;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;;AAae,SAAS;IACpB,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,iBAAiB,EAAE,GAAG,IAAA,0IAAW;IAC9D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAA0B,IAAI;IAElE,0BAA0B;IAC1B,MAAM,SAAS;QAAC;QAAO;QAAO;QAAO;QAAO;QAAO;QAAO;QAAQ;KAAM;IAExE,IAAA,kNAAS,EAAC;QACN,IAAI,eAAe,QAAQ;YACvB,uBAAuB;YACvB,kBAAkB;YAElB,qBAAqB;YACrB,OAAO,EAAE,CAAC,gBAAgB,CAAC;gBACvB,UAAU,CAAA;oBACN,MAAM,SAAS,IAAI,IAAI;oBACvB,OAAO,GAAG,CAAC,KAAK,KAAK,EAAE;oBACvB,OAAO;gBACX;YACJ;YAEA,OAAO;gBACH,OAAO,GAAG,CAAC;YACf;QACJ;IACJ,GAAG;QAAC;QAAa;KAAO;IAExB,qBACI,8OAAC;kDAAc;;0BACX,8OAAC;0DAAc;0BAEV;uBAAI;uBAAW;iBAAO,CAAC,GAAG,CAAC,CAAC,OAAO;oBAChC,MAAM,OAAO,OAAO,GAAG,CAAC;oBACxB,MAAM,QAAQ,MAAM,SAAS;oBAC7B,MAAM,aAAa,CAAC,MAAM,aAAa,CAAC,KAAK;oBAE7C,qBACI,8OAAC;kEAAoC;;0CACjC,8OAAC;0EAAe;0CAA2B;;;;;;0CAC3C,8OAAC;0EAAe;;oCAAuB;oCAAE,MAAM,cAAc,CAAC,WAAW;wCAAE,uBAAuB;wCAAG,uBAAuB;oCAAE;;;;;;;4BAC7H,sBACG,8OAAC;0EAAgB,CAAC,0BAA0B,EAAE,aAAa,mBAAmB,gBAAgB;;oCACzF,2BAAa,8OAAC,gOAAU;wCAAC,WAAU;;;;;6DAAoB,8OAAC,sOAAY;wCAAC,WAAU;;;;;;oCAC/E,KAAK,GAAG,CAAC,KAAK,SAAS,EAAE,OAAO,CAAC;oCAAG;;;;;;;4BAG5C,CAAC,sBAAQ,8OAAC;0EAAe;0CAAwB;;;;;;;uBAT5C,GAAG,MAAM,CAAC,EAAE,GAAG;;;;;gBAYjC;;;;;;;;;;;;;;;;AAgBhB"
      }
    }
  ]
}