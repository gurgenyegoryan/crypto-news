{
  "version": 3,
  "sources": [],
  "sections": [
    {
      "offset": {
        "line": 4,
        "column": 0
      },
      "map": {
        "version": 3,
        "sources": [
          "file:///home/gurgen/projects/personal/crypto-news/apps/web/src/hooks/useRealtime.ts"
        ],
        "sourcesContent": [
          "import { useEffect, useRef, useState } from 'react';\nimport { io, Socket } from 'socket.io-client';\n\nconst SOCKET_URL = process.env.NEXT_PUBLIC_API_URL || 'http://https://api.cryptomonitor.app';\n\nexport const useRealtime = () => {\n    const socketRef = useRef<Socket | null>(null);\n    const [isConnected, setIsConnected] = useState(false);\n\n    useEffect(() => {\n        const token = localStorage.getItem('auth_token');\n\n        // Don't attempt to connect if there is no token\n        if (!token) {\n            return;\n        }\n\n        // Connect to the 'events' namespace\n        socketRef.current = io(`${SOCKET_URL}/events`, {\n            auth: {\n                token: `Bearer ${token}`\n            },\n            query: {\n                token: token\n            },\n            transports: ['websocket'],\n            reconnection: true,\n            reconnectionAttempts: 5,\n            reconnectionDelay: 3000,\n        });\n\n        socketRef.current.on('connect', () => {\n            console.log('Connected to WebSocket');\n            setIsConnected(true);\n        });\n\n        socketRef.current.on('disconnect', () => {\n            console.log('Disconnected from WebSocket');\n            setIsConnected(false);\n        });\n\n        socketRef.current.on('connect_error', (err) => {\n            // Suppress 403 errors to keep console clean, as they are expected when auth fails\n            if (err.message.includes('403') || (err as any).data?.code === 403) {\n                console.warn('WebSocket auth failed (403). This is expected if session expired.');\n            } else {\n                console.error('WebSocket connection error:', err.message);\n            }\n            setIsConnected(false);\n        });\n\n        return () => {\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n            }\n        };\n    }, []);\n\n    const subscribeToTicker = (tokens: string[]) => {\n        if (socketRef.current && isConnected) {\n            socketRef.current.emit('subscribeToTicker', tokens);\n        }\n    };\n\n    const unsubscribeFromTicker = (tokens: string[]) => {\n        if (socketRef.current && isConnected) {\n            socketRef.current.emit('unsubscribeFromTicker', tokens);\n        }\n    };\n\n    return {\n        socket: socketRef.current,\n        isConnected,\n        subscribeToTicker,\n        unsubscribeFromTicker,\n    };\n};\n"
        ],
        "names": [],
        "mappings": ";;;;AAGmB;AAHnB;AACA;;;;AAEA,MAAM,aAAa,6DAAmC;AAE/C,MAAM,cAAc;;IACvB,MAAM,YAAY,IAAA,uKAAM,EAAgB;IACxC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;iCAAC;YACN,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,gDAAgD;YAChD,IAAI,CAAC,OAAO;gBACR;YACJ;YAEA,oCAAoC;YACpC,UAAU,OAAO,GAAG,IAAA,wLAAE,EAAC,GAAG,WAAW,OAAO,CAAC,EAAE;gBAC3C,MAAM;oBACF,OAAO,CAAC,OAAO,EAAE,OAAO;gBAC5B;gBACA,OAAO;oBACH,OAAO;gBACX;gBACA,YAAY;oBAAC;iBAAY;gBACzB,cAAc;gBACd,sBAAsB;gBACtB,mBAAmB;YACvB;YAEA,UAAU,OAAO,CAAC,EAAE,CAAC;yCAAW;oBAC5B,QAAQ,GAAG,CAAC;oBACZ,eAAe;gBACnB;;YAEA,UAAU,OAAO,CAAC,EAAE,CAAC;yCAAc;oBAC/B,QAAQ,GAAG,CAAC;oBACZ,eAAe;gBACnB;;YAEA,UAAU,OAAO,CAAC,EAAE,CAAC;yCAAiB,CAAC;oBACnC,kFAAkF;oBAClF,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,AAAC,IAAY,IAAI,EAAE,SAAS,KAAK;wBAChE,QAAQ,IAAI,CAAC;oBACjB,OAAO;wBACH,QAAQ,KAAK,CAAC,+BAA+B,IAAI,OAAO;oBAC5D;oBACA,eAAe;gBACnB;;YAEA;yCAAO;oBACH,IAAI,UAAU,OAAO,EAAE;wBACnB,UAAU,OAAO,CAAC,UAAU;oBAChC;gBACJ;;QACJ;gCAAG,EAAE;IAEL,MAAM,oBAAoB,CAAC;QACvB,IAAI,UAAU,OAAO,IAAI,aAAa;YAClC,UAAU,OAAO,CAAC,IAAI,CAAC,qBAAqB;QAChD;IACJ;IAEA,MAAM,wBAAwB,CAAC;QAC3B,IAAI,UAAU,OAAO,IAAI,aAAa;YAClC,UAAU,OAAO,CAAC,IAAI,CAAC,yBAAyB;QACpD;IACJ;IAEA,OAAO;QACH,QAAQ,UAAU,OAAO;QACzB;QACA;QACA;IACJ;AACJ;GAvEa"
      }
    },
    {
      "offset": {
        "line": 98,
        "column": 0
      },
      "map": {
        "version": 3,
        "sources": [
          "file:///home/gurgen/projects/personal/crypto-news/apps/web/src/components/LivePriceTicker.tsx"
        ],
        "sourcesContent": [
          "\"use client\";\n\nimport React, { useEffect, useState } from 'react';\nimport { useRealtime } from '../hooks/useRealtime';\nimport { TrendingUp, TrendingDown } from 'lucide-react';\n\ninterface TickerData {\n    token: string;\n    price: number;\n    change24h: number;\n    timestamp: number;\n}\n\nexport default function LivePriceTicker() {\n    const { socket, isConnected, subscribeToTicker } = useRealtime();\n    const [prices, setPrices] = useState<Map<string, TickerData>>(new Map());\n\n    // Initial tokens to track\n    const tokens = ['BTC', 'ETH', 'BNB', 'SOL', 'XRP', 'ADA', 'DOGE', 'DOT'];\n\n    useEffect(() => {\n        if (isConnected && socket) {\n            // Subscribe to updates\n            subscribeToTicker(tokens);\n\n            // Listen for updates\n            socket.on('tickerUpdate', (data: TickerData) => {\n                setPrices(prev => {\n                    const newMap = new Map(prev);\n                    newMap.set(data.token, data);\n                    return newMap;\n                });\n            });\n\n            return () => {\n                socket.off('tickerUpdate');\n            };\n        }\n    }, [isConnected, socket]);\n\n    return (\n        <div className=\"w-full bg-black/80 border-b border-white/10 overflow-hidden py-2\">\n            <div className=\"flex items-center gap-8 animate-scroll whitespace-nowrap\">\n                {/* Duplicate list for seamless scrolling effect */}\n                {[...tokens, ...tokens].map((token, i) => {\n                    const data = prices.get(token);\n                    const price = data?.price || 0;\n                    const isPositive = (data?.change24h || 0) >= 0;\n\n                    return (\n                        <div key={`${token}-${i}`} className=\"flex items-center gap-2 text-sm\">\n                            <span className=\"font-bold text-gray-300\">{token}</span>\n                            <span className=\"text-white font-mono\">${price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 4 })}</span>\n                            {data && (\n                                <span className={`flex items-center text-xs ${isPositive ? 'text-green-400' : 'text-red-400'}`}>\n                                    {isPositive ? <TrendingUp className=\"w-3 h-3 mr-1\" /> : <TrendingDown className=\"w-3 h-3 mr-1\" />}\n                                    {Math.abs(data.change24h).toFixed(2)}%\n                                </span>\n                            )}\n                            {!data && <span className=\"text-gray-600 text-xs\">Loading...</span>}\n                        </div>\n                    );\n                })}\n            </div>\n            <style jsx>{`\n                @keyframes scroll {\n                    0% { transform: translateX(0); }\n                    100% { transform: translateX(-50%); }\n                }\n                .animate-scroll {\n                    animation: scroll 30s linear infinite;\n                }\n                .animate-scroll:hover {\n                    animation-play-state: paused;\n                }\n            `}</style>\n        </div>\n    );\n}\n"
        ],
        "names": [],
        "mappings": ";;;;;;AAEA;AACA;AACA;AAAA;;;AAJA;;;;;AAae,SAAS;;IACpB,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,iBAAiB,EAAE,GAAG,IAAA,6IAAW;IAC9D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA0B,IAAI;IAElE,0BAA0B;IAC1B,MAAM,SAAS;QAAC;QAAO;QAAO;QAAO;QAAO;QAAO;QAAO;QAAQ;KAAM;IAExE,IAAA,0KAAS;qCAAC;YACN,IAAI,eAAe,QAAQ;gBACvB,uBAAuB;gBACvB,kBAAkB;gBAElB,qBAAqB;gBACrB,OAAO,EAAE,CAAC;iDAAgB,CAAC;wBACvB;yDAAU,CAAA;gCACN,MAAM,SAAS,IAAI,IAAI;gCACvB,OAAO,GAAG,CAAC,KAAK,KAAK,EAAE;gCACvB,OAAO;4BACX;;oBACJ;;gBAEA;iDAAO;wBACH,OAAO,GAAG,CAAC;oBACf;;YACJ;QACJ;oCAAG;QAAC;QAAa;KAAO;IAExB,qBACI,6LAAC;kDAAc;;0BACX,6LAAC;0DAAc;0BAEV;uBAAI;uBAAW;iBAAO,CAAC,GAAG,CAAC,CAAC,OAAO;oBAChC,MAAM,OAAO,OAAO,GAAG,CAAC;oBACxB,MAAM,QAAQ,MAAM,SAAS;oBAC7B,MAAM,aAAa,CAAC,MAAM,aAAa,CAAC,KAAK;oBAE7C,qBACI,6LAAC;kEAAoC;;0CACjC,6LAAC;0EAAe;0CAA2B;;;;;;0CAC3C,6LAAC;0EAAe;;oCAAuB;oCAAE,MAAM,cAAc,CAAC,WAAW;wCAAE,uBAAuB;wCAAG,uBAAuB;oCAAE;;;;;;;4BAC7H,sBACG,6LAAC;0EAAgB,CAAC,0BAA0B,EAAE,aAAa,mBAAmB,gBAAgB;;oCACzF,2BAAa,6LAAC,mOAAU;wCAAC,WAAU;;;;;6DAAoB,6LAAC,yOAAY;wCAAC,WAAU;;;;;;oCAC/E,KAAK,GAAG,CAAC,KAAK,SAAS,EAAE,OAAO,CAAC;oCAAG;;;;;;;4BAG5C,CAAC,sBAAQ,6LAAC;0EAAe;0CAAwB;;;;;;;uBAT5C,GAAG,MAAM,CAAC,EAAE,GAAG;;;;;gBAYjC;;;;;;;;;;;;;;;;AAgBhB;GAjEwB;;QAC+B,6IAAW;;;KAD1C"
      }
    }
  ]
}